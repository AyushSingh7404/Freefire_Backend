# Alembic configuration for FreeFire Esports backend.
#
# IMPORTANT — two things intentionally omitted vs the default template:
#   1. `timezone` is left blank  → avoids "Can't locate timezone: UTC" on Windows
#   2. `version_locations` is not set → avoids "Multiple version locations" error
#      (the default of alembic/versions/ comes from script_location below)
#
# The actual database URL is NOT set here.
# It is injected in alembic/env.py from our Settings class (.env file),
# so the dummy value below is immediately overridden and never used.

[alembic]
# Folder that contains env.py, script.py.mako, and the versions/ directory
script_location = alembic

# Migration filename template — includes timestamp so files sort chronologically
file_template = %%(year)d%%(month).2d%%(day).2d_%%(hour).2d%%(minute).2d_%%(rev)s_%%(slug)s

# sys.path prepend — allows `from app.xxx import yyy` to work when running
# alembic commands from the project root (where app/ lives)
prepend_sys_path = .

# timezone is intentionally commented out (not just blank).
# Setting `timezone =` (empty string) causes ZoneInfo("") to crash on Windows.
# Without this key, Alembic uses local system time for migration file timestamps.
# timezone =

# Slug max length for the filename
truncate_slug_length = 40

# Always run env.py during `alembic revision` (needed for autogenerate)
revision_environment = true

# Allow .pyc files to count as revisions (useful in some CI setups)
sourceless = false

# version_path_separator — required by newer Alembic, use os.pathsep
version_path_separator = os

# Output encoding for generated migration files
output_encoding = utf-8

# Database URL — this value is overridden in env.py via Settings.database_url.
# It must still be present here for Alembic's config parser to not error.
sqlalchemy.url = postgresql://user:pass@localhost/dbname


[post_write_hooks]
# No post-write hooks configured.
# You could add `black` here to auto-format generated migration files.


[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARNING
handlers = console
qualname =

[logger_sqlalchemy]
level = WARNING
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S
